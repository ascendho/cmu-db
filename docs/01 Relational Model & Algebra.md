# **01: Relational Model & Algebra**

### 一、课程基本信息与规定

1. **课程目标**：
   - 重点是数据库管理系统（DBMS）的设计与实现，而非如何使用或管理 DBMS。
   - 使用 CMU 自研的教学 DBMS：**BusTub**（基于C++20）。

2. **课程规则**：
   - 鼓励在听不懂、讲得太快或与数据库相关的问题时打断提问。
   - 禁止提问与课程无关的内容（如区块链、上厕所等）。
   - 课后不立即答疑。

3. **项目要求**：
   - 共有多个项目，每个项目都建立在前一个基础上。
   - **Project 0**（Count-min Sketch）是入门项目，要求所有学生必须满分完成，否则需退课。
   - 允许整个学期共有 4 个“迟交日”用于项目。

4. **学术诚信**：
   - 作业和项目必须独立完成，禁止抄袭代码。
   - 允许使用生成式 AI 工具，但如有疑问应直接咨询教师。

---

### 二、数据库系统背景

1. **数据库定义**：
   - 数据库是模拟现实世界中某些方面的、有组织的相关数据集合。

2. **早期数据库系统（1960年代）**：
   - 如 IDS、IMS、CODASYL，要求开发者使用过程式代码编写查询，指定访问路径。
   - 缺点：数据库结构变化时需重写查询代码，缺乏数据独立性。

---

### 三、关系模型

1. **核心概念**：
   - **关系**：无序的元组集合，可视为表。
   - **元组**：属性值的集合，每个值应原子化。
   - **NULL**：属于每个域的特殊值。

2. **键约束**：
   - **主键**：唯一标识一个元组。
   - **外键**：一个关系中的属性引用另一个关系中的元组。

3. **数据完整性约束**：
   - 用户定义的条件，确保数据一致性（如 NOT NULL、CHECK约束）。
   - 常见的有唯一键约束和引用完整性约束。

4. **数据独立性**：
   - **逻辑独立性**：应用程序不依赖于数据库的逻辑结构。
   - **物理独立性**：应用程序不依赖于数据的物理存储方式。

---

### 四、关系代数

关系代数是用于查询和操作关系的基础数学工具，所有操作输入和输出都是关系。

1. **基本操作**：

   | 操作     | 符号                    | 说明                                         |
   | -------- | ----------------------- | -------------------------------------------- |
   | 选择     | $\sigma_{predicate}(R)$ | 筛选满足条件的元组                           |
   | 投影     | $\Pi_{A1,A2,...}(R)$    | 选择特定属性                                 |
   | 并       | $R \cup S$              | 合并两个关系（去重）                         |
   | 交       | $R \cap S$              | 返回共同存在的元组                           |
   | 差       | $R - S$                 | 返回属于第一个但不属于第二个的元组           |
   | 笛卡尔积 | $R \times S$            | 所有元组组合                                 |
   | 连接     | ⋈                       | 基于共同属性合并两个关系的元组（如自然连接） |

2. **其他操作**：
   - 重命名、赋值、去重、聚合、排序、除法等。

3. **与 SQL 对应**：

   - 关系代数操作大多可直接对应 SQL 语句（如 SELECT、JOIN、UNION等）。

---

### 五、其他数据模型

1. **文档模型**：
   - 使用 JSON 等格式存储层次化数据，避免对象-关系阻抗不匹配。
   - 代表系统：MongoDB、CouchDB等。

2. **向量模型**：
   - 用于最近邻搜索，适用于语义搜索（如 ChatGPT 生成的嵌入向量）。
   - 使用专用索引（如 HNSW、Faiss）加速搜索。
   - 多数现代 DBMS 已支持向量索引（如 ClickHouse、PostgreSQL、Oracle等）。

---

### 六、课程亮点与延伸内容

- **数据库监狱计划**：从2025年秋季开始，向监狱中的人免费提供数据库课程。
- **行业合作**：每周三有数据库公司进行10分钟技术分享（如 ClickHouse、SingleStore等）。
- **未来数据系统研讨会**：每周一公开讲座，邀请行业专家分享最新技术。

---

### 七、下节课预告

- 主题：**现代 SQL**
- 要求：确保掌握基本 SQL 语法。

---

### 总结

本次课程系统介绍了数据库系统的历史背景、关系模型的基本概念与约束、关系代数的核心操作，并简要对比了文档模型和向量模型等现代数据模型。课程强调理论与实践结合，为学生后续深入学习 DBMS 实现打下坚实基础。
